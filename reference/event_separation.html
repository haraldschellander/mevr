<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Detect Rainfall Events with Specified Separation Time (Dry Time) and Minimum Rain Threshold — event_separation • mevr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Detect Rainfall Events with Specified Separation Time (Dry Time) and Minimum Rain Threshold — event_separation"><meta name="description" content="The `event_separation` function identifies rainfall events in time-series
data based on a minimum rainfall threshold and a separation time between
events. It uses morphological operations to detect and separate events,
and it can ignore short events that do not meet a minimum duration criterion.
Based on Marra..."><meta property="og:description" content="The `event_separation` function identifies rainfall events in time-series
data based on a minimum rainfall threshold and a separation time between
events. It uses morphological operations to detect and separate events,
and it can ignore short events that do not meet a minimum duration criterion.
Based on Marra..."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mevr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Detect Rainfall Events with Specified Separation Time (Dry Time) and Minimum Rain Threshold</h1>

      <div class="d-none name"><code>event_separation.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The `event_separation` function identifies rainfall events in time-series
data based on a minimum rainfall threshold and a separation time between
events. It uses morphological operations to detect and separate events,
and it can ignore short events that do not meet a minimum duration criterion.
Based on Marra...</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">event_separation</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  separation_in_min <span class="op">=</span> <span class="fl">360</span>,</span>
<span>  time_resolution <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  ignore_event_duration <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  min_rain <span class="op">=</span> <span class="fl">0.1</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame with two columns, observation date and values.</p><ul><li><p>`groupvar`: A time variable (e.g., POSIXct or Date) indicating the timestamp of each observation.</p></li>
<li><p>`val`: A numeric vector containing the observed rainfall values.</p></li>
</ul></dd>


<dt id="arg-separation-in-min">separation_in_min<a class="anchor" aria-label="anchor" href="#arg-separation-in-min"></a></dt>
<dd><p>Numeric. The minimum dry period (in minutes)
that separates two distinct rainfall events. Default is 360 minutes (6 hours).
Values less than <code>min_rain</code> count as zero. Note that this should
depend on local climatological conditions.</p></dd>


<dt id="arg-time-resolution">time_resolution<a class="anchor" aria-label="anchor" href="#arg-time-resolution"></a></dt>
<dd><p>Numeric. The time step resolution of the data
(in minutes). For example, if observations are recorded every 10 minutes,
`time_resolution` should be 10. Default is 10 minutes.</p></dd>


<dt id="arg-ignore-event-duration">ignore_event_duration<a class="anchor" aria-label="anchor" href="#arg-ignore-event-duration"></a></dt>
<dd><p>Numeric. The minimum duration (in minutes)
of rainfall required for an event to be considered valid.
Events shorter than this will be ignored. Default is 30 minutes.</p></dd>


<dt id="arg-min-rain">min_rain<a class="anchor" aria-label="anchor" href="#arg-min-rain"></a></dt>
<dd><p>Numeric. The minimum rainfall value (e.g., in mm)
required for a data point to be considered part of an event. Default is 0.1.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with the following elements:</p><ul><li><p>`data`: A modified version of the input data with an additional
    column `is_event`, indicating whether each time step is part of
    a detected event (1 for event, 0 for no event). This is useful in the
    next step of the <code>event_separation</code>.</p></li>
<li><p>`fromto`: A tibble with two columns, `from` and `to`,
    representing the indices of the start (`from`) and end (`to`)
    of each detected rainfall event.</p></li>
<li><p>`ts_res`: The time resolution used in the function (in minutes).</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function works by first dilating the rainfall data using a structuring
element defined by the separation time, followed by erosion to remove noise.
It then detects events based on the separation time and the minimum rainfall
threshold, returning the time intervals where events occurred.
Events that span more than two years or are shorter than
the `ignore_event_duration` are ignored.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Example data</span></span></span>
<span class="r-in"><span><span class="va">mock_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  groupvar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.POSIXt.html" class="external-link">seq.POSIXt</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"10 min"</span>, length.out <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  val <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">70</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Detect rainfall events with a separation of 6 hours and a minimum rain threshold of 0.1</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">event_separation</span><span class="op">(</span><span class="va">mock_data</span>, separation_in_min <span class="op">=</span> <span class="fl">360</span>, time_resolution <span class="op">=</span> <span class="fl">10</span>, min_rain <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">fromto</span><span class="op">)</span>  <span class="co"># View detected events</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Harald Schellander.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

